alias hid r10
alias ele r11
alias tor r12

move hid -1
move ele -1
move tor -1
inicio:
yield
#pongo cuanto se le pidio ac aada maquina
sbn HASH("StructureConsoleLED5") HASH("tor") Setting tor
sbn HASH("StructureConsoleLED5") HASH("ele") Setting ele
sbn HASH("StructureConsoleLED5") HASH("hid") Setting hid
#si es -1 veo si reinicio
bltz hid renhid
#lo que queria generar menos los que ya hizo
lb r0 HASH("StructureHydraulicPipeBender") ExportCount Minimum
sub r1 hid r0
#actualziao el dial
sbn HASH("StructureLogicDial") HASH("hid") Setting r1
#si es 0 termino
beqz r1 nohid
salhid:
#idem pero otra maquina
bltz ele renele
lb r0 HASH("StructureElectronicsPrinter") ExportCount Minimum
sub r1 ele r0
sbn HASH("StructureLogicDial") HASH("ele") Setting r1
beqz r1 noele
salele:
#idem pero otra maquina
bltz tor rentor
lb r0 HASH("StructureAutolathe") ExportCount Minimum
sub r1 tor r0
sbn HASH("StructureLogicDial") HASH("tor") Setting r1
beqz r1 notor
saltor:
j inicio

renhid:
#si n mando a imprimir o si el dial esta en 0 no hago nada
lbn r0 HASH("StructureLogicSwitch") HASH("hid") Open Minimum
yield
bnezal r0 cerrarhid
beqz r0 salhid
lbn r0 HASH("StructureLogicDial") HASH("hid") Setting Minimum
beqz r0 salhid
#si esta imprimiendo y hid esta en -1 y hay algo ene l dial debo guardar el valor
move hid r0
# y limpiar memoria para que empiece a contar
sb HASH("StructureHydraulicPipeBender") ClearMemory 1
move r0 HASH("StructureHydraulicPipeBender")
sbn HASH("StructureLogicMemory") HASH("maquina") Setting r0
sbn HASH("StructureLogicMemory") HASH("cantidad") Setting hid
j salhid

cerrarhid:
sbn HASH("StructureLogicSwitch") HASH("hid") Open 0
j ra

nohid:
#reinicio todo y apago la maquina, ya imprimio lo que debia
move hid -1
sb HASH("StructureHydraulicPipeBender") Activate 0
sb HASH("StructureHydraulicPipeBender") Open 1
lb r0 HASH("StructureHydraulicPipeBender") Reagents Minimum
bnez r0 nohid
sb HASH("StructureHydraulicPipeBender") Open 0
sb HASH("StructureHydraulicPipeBender") On 0
j salhid

renele:
#si n mando a imprimir o si el dial esta en 0 no hago nada
lbn r0 HASH("StructureLogicSwitch") HASH("ele") Open Minimum
yield
bnezal r0 cerrarele
beqz r0 salele
lbn r0 HASH("StructureLogicDial") HASH("ele") Setting Minimum
beqz r0 salele
move ele r0
sb HASH("StructureElectronicsPrinter") ClearMemory 1
move r0 HASH("StructureElectronicsPrinter")
sbn HASH("StructureLogicMemory") HASH("maquina") Setting r0
sbn HASH("StructureLogicMemory") HASH("cantidad") Setting ele
j salele
cerrarele:
sbn HASH("StructureLogicSwitch") HASH("ele") Open 0
j ra
noele:
move ele -1
sb HASH("StructureElectronicsPrinter") Activate 0
sb HASH("StructureElectronicsPrinter") Open 1
lb r0 HASH("StructureElectronicsPrinter") Reagents Minimum
bnez r0 noele
sb HASH("StructureElectronicsPrinter") Open 0
sb HASH("StructureElectronicsPrinter") On 0
j salele

rentor:
#si n mando a imprimir o si el dial esta en 0 no hago nada
lbn r0 HASH("StructureLogicSwitch") HASH("tor") Open Minimum
yield
bnezal r0 cerrartor
beqz r0 saltor
sbn HASH("StructureLogicMemory") HASH("maquina") Setting -22
lbn r0 HASH("StructureLogicDial") HASH("tor") Setting Minimum
beqz r0 saltor
move tor r0
sb HASH("StructureAutolathe") ClearMemory 1
move r0 HASH("StructureAutolathe")
sbn HASH("StructureLogicMemory") HASH("maquina") Setting r0
sbn HASH("StructureLogicMemory") HASH("cantidad") Setting tor
j saltor
cerrartor:
sbn HASH("StructureLogicSwitch") HASH("tor") Open 0
j ra
notor:
move tor -1
sb HASH("StructureAutolathe") Activate 0
sb HASH("StructureAutolathe") Open 1
lb r0 HASH("StructureAutolathe") Reagents Minimum
bnez r0 notor
sb HASH("StructureAutolathe") Open 0
sb HASH("StructureAutolathe") On 0
j saltor
